(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{290:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trains/[trainNum]",function(){return a(2630)}])},2630:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSG:function(){return f},default:function(){return k}});var n=a(5893),r=a(4298),i=function(e){var t=e.trainNum,a=e.trainName;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)(r.default,{src:"https://www.googletagmanager.com/gtag/js?id=G-L3ZMMQZR55"}),(0,n.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n                        window.dataLayer = window.dataLayer || [];\n                        function gtag(){dataLayer.push(arguments);}\n                        gtag('js', new Date());\n                        gtag('require', 'dnt')\n                        gtag('config', 'G-L3ZMMQZR55', { page_path: window.location.pathname });\n                    "}}),(0,n.jsx)(r.default,{src:"https://storage.googleapis.com/outfox/dnt_min.js"}),(0,n.jsxs)("title",{children:["Amtraker | Amtrak Train ",a," (",t,") Tracker"]}),(0,n.jsx)("meta",{property:"og:url",content:"https://amtraker.com/"}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:title",content:"Amtrak Train "+a+" Tracker (Amtrak Train "+t+" Tracker) | Amtraker"}),(0,n.jsx)("meta",{property:"og:description",content:"Never worry about tracking your Amtrak train again, even in the middle of nowhere. This simple website and PWA makes it easier than ever to track trains while using minimal amounts of data."}),(0,n.jsx)("meta",{property:"og:image",content:"https://amtraker.com/images/opengraph.png"}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{property:"twitter:domain",content:"amtraker.com"}),(0,n.jsx)("meta",{property:"twitter:url",content:"https://amtraker.com/"}),(0,n.jsx)("meta",{name:"twitter:title",content:"Amtrak Train "+a+" Tracker (Amtrak Train "+t+" Tracker) | Amtraker"}),(0,n.jsx)("meta",{name:"twitter:description",content:"Never worry about tracking your Amtrak train again, even in the middle of nowhere. This simple website and PWA makes it easier than ever to track trains while using minimal amounts of data."}),(0,n.jsx)("meta",{name:"twitter:image",content:"https://amtraker.com/images/opengraph.png"}),(0,n.jsx)("link",{rel:"manifest",href:"manifest.json"}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"images/icons/icon-72.png"}),(0,n.jsx)("link",{rel:"apple-touch-icon",href:"images/icons/icon-512.png"}),(0,n.jsx)("meta",{name:"apple-mobile-web-app-status-bar",content:"#212529"}),(0,n.jsx)("meta",{name:"theme-color",content:"#212529"}),(0,n.jsx)("meta",{name:"title",content:"Amtrak Train "+a+" Tracker (Amtrak Train "+t+" Tracker) | Amtraker"}),(0,n.jsx)("meta",{name:"description",content:"Never worry about tracking your Amtrak train again, even in the middle of nowhere. This simple website and PWA makes it easier than ever to track trains while using minimal amounts of data."}),(0,n.jsx)("meta",{name:"keywords",content:a+"Train Tracking, "+a+" Tracking, Amtrak "+a+" Train Tracking, Amtrak "+a+" Tracking, Amtrak "+a+", Amtrak, Amtrak Train Amtrak Train Status, Amtrak Train Tracker, Amtrak Tracker, Amtrak Train Status Today, Amtrak Status, Amtrak Train Tracking, Amtrak Tracking, Train Tracking"}),(0,n.jsx)("meta",{name:"robots",content:"index, follow"}),(0,n.jsx)("meta",{httpEquiv:"Content-Type",content:"text/html; charset=utf-8"}),(0,n.jsx)("meta",{name:"language",content:"English"}),(0,n.jsx)("meta",{name:"revisit-after",content:"30 minutes"}),(0,n.jsx)("meta",{name:"author",content:"Piero LLC"}),(0,n.jsx)("link",{rel:"sitemap",type:"application/xml",title:"Sitemap",href:"/sitemap.xml"})]})},o=a(4051),c=a.n(o),s=a(1664),m=a(7294);function l(e,t,a,n,r,i,o){try{var c=e[i](o),s=c.value}catch(m){return void a(m)}c.done?t(s):Promise.resolve(s).then(n,r)}var u=function(e){var t=e.trainNum,a=e.trainName,r=(0,m.useState)([]),i=r[0],o=r[1],u=(0,m.useState)(!1),h=(u[0],u[1]);(0,m.useEffect)((function(){h(!0),fetch("https://api.amtraker.com/v1/trains/".concat(t)).then(function(){var e,t=(e=c().mark((function e(t){var a,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:a=e.sent,n=a.map((function(e){return e.origSchDep.toString()})),o(n),h(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),o("noActive");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})),function(){var t=this,a=arguments;return new Promise((function(n,r){var i=e.apply(t,a);function o(e){l(i,n,r,o,c,"next",e)}function c(e){l(i,n,r,o,c,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}())}),[]);return"noActive"==i||0==i.length?(0,n.jsx)("div",{className:"trainSelector",children:(0,n.jsxs)("p",{children:["There are currently no active ",a," trains."]})}):(0,n.jsxs)("div",{className:"trainSelector",children:[(0,n.jsx)("p",{children:"Which day's train would you like to track?"}),i.map((function(e){return(0,n.jsx)("p",{children:(0,n.jsx)(s.default,{href:{pathname:"/trains/".concat(t,"/").concat(new Date(e).getDate())},children:(0,n.jsx)("a",{children:new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})},e)},"".concat(t,"-").concat(new Date(e).getDate()))}))]})},h=a(4655),d=function(e){var t=e.stationObj,a=e.dateSetting,r=void 0===a?"both":a,i={EST:"America/New_York",EDT:"America/New_York","America/New_York":"America/New_York",CST:"America/Chicago",CDT:"America/Chicago","America/Chicago":"America/Chicago",MST:"America/Denver",MDT:"America/Denver","America/Denver":"America/Denver",PST:"America/Los_Angeles",PDT:"America/Los_Angeles","America/Los_Angeles":"America/Los_Angeles"},o=t.schDep||t.schArr,c=new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),s=function(e,t,a){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r={timeZone:i[n],timeZoneName:"short",hour:"2-digit",minute:"2-digit"},o={timeZone:i[t],timeZoneName:"short",hour:"2-digit",minute:"2-digit"},c=new Date(e).toLocaleTimeString("en-US",r),s=new Date(e).toLocaleTimeString("en-US",o);switch(a){case"local":return c;case"train":return s;default:return"".concat(c," (").concat(s,")")}};return(0,n.jsx)("a",{className:"card",id:t.code,children:(0,n.jsxs)("div",{className:"meta",children:[(0,n.jsxs)("div",{className:"title",children:[(0,n.jsx)("h3",{children:"".concat(t.stationName," (").concat(t.code,")")}),(0,n.jsx)("div",{className:"status "+{Late:"late",Early:"early","On Time":"on-time",Completed:"completed","No Data":"completed"}[t.stationTimely],children:t.stationTimely})]}),(0,n.jsx)("p",{className:"route",children:c}),(0,n.jsx)("p",{className:"route",children:"Arrival/Departure:"}),function(e,t){var a=e.estArr?e.estArr:e.postArr,r=e.estDep?e.estDep:e.postDep,i=a?'<span class="tag">Arrival: </span>'.concat(s(a,e.tz,t)):"",o=r?'<span class="tag">Departure: </span>'.concat(s(r,e.tz,t)):"";return(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:'\n                        <p class="location">'.concat(i,'</p>\n                        <p class="location">').concat(o,"</p>\n                    ")}})}(t,r)]})})},g=function(e){var t=e.trainNum,a=e.trainDate,r=(0,m.useState)(null),i=r[0],o=r[1],c=(0,m.useState)(null),s=c[0],l=c[1],u=(0,m.useState)(!1),h=(u[0],u[1]),g=(0,m.useState)(0);g[0],g[1];return(0,m.useEffect)((function(){l(localStorage.getItem("dateSetting")?localStorage.getItem("dateSetting"):"both")})),(0,m.useEffect)((function(){h(!0),fetch("https://api.amtraker.com/v1/trains/".concat(t)).then((function(e){return e.json()})).then((function(e){for(var t={},n=0;n<e.length;n++)e[n].origSchDep!=a&&new Date(e[n].origSchDep).getDate()!=a||(t=e[n]);o(t),h(!1)}))}),[]),i?(0,n.jsx)(n.Fragment,{children:i.stations.map((function(e){return(0,n.jsx)(d,{stationObj:e,dateSetting:s},e.code)}))}):(0,n.jsx)(n.Fragment,{children:"There was an error fetching the station data for this train. Please try again later or email me: piero (at) piemadd (dot) com."})},p=a(1163),f=!0;function k(e){var t=(0,p.useRouter)(),a=(0,m.useState)([]),r=a[0],o=a[1],c=(0,m.useState)(!1),s=c[0],l=c[1],d=(0,m.useState)(null),f=d[0],k=d[1],x=(0,m.useState)(!1),j=(x[0],x[1]);(0,m.useEffect)((function(){l(0==window.history.state.idx)}),[]);return(0,m.useEffect)((function(){var t=new URLSearchParams(window.location.search),a=Object.fromEntries(t.entries());if(k(a.d),j(!0),fetch("https://api.amtraker.com/v1/trains/dates").then((function(e){return e.json()})).then((function(t){var a=[];if(t[e.trainNum]&&t[e.trainNum].length>0)for(var n=0;n<t[e.trainNum].length;n++){var r=new Date(t[e.trainNum][n]);a.push(r.getDate())}o(a),j(!1)})),console.log("checking for date idk"),e.trainNum&&(r.includes(parseInt(f))||r.includes(new Date(f).getDate()))){var n=localStorage.getItem("savedTrains")?localStorage.getItem("savedTrains"):"{}";n=JSON.parse(n),console.log("date exists so i should save new stuff idk!"),console.log(n),console.log(e.trainNum),console.log(f),n["".concat(e.trainNum,"-").concat(f)]=n["".concat(e.trainNum,"-").concat(f)]?n["".concat(e.trainNum,"-").concat(f)]:[],localStorage.setItem("savedTrains",JSON.stringify(n))}}),[]),e.trainNum&&(r.includes(parseInt(f))||r.includes(new Date(f).getDate()))?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{trainNum:e.trainNum,trainName:e.trainName}),(0,n.jsx)("header",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"clickable",children:(0,n.jsx)("a",{onClick:function(){s?t.replace("/"):t.back()},children:"Back"})}),(0,n.jsx)("h1",{children:"View Train"}),(0,n.jsx)("h2",{onClick:function(){return t.push("/?delete=true&n=".concat(e.trainNum,"&d=").concat(f))},className:"clickable",children:"Delete Train"})]})}),(0,n.jsx)("main",{className:"trainsHolder",children:(0,n.jsx)(h.Z,{trainNum:e.trainNum,trainDate:f,clickable:"false"})}),(0,n.jsx)("header",{children:(0,n.jsx)("h1",{children:"Stations"})}),(0,n.jsx)("main",{id:"stationsHolder",className:"stationsHolder",children:(0,n.jsx)(g,{trainNum:e.trainNum,trainDate:f})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{trainNum:e.trainNum,trainName:e.trainName}),(0,n.jsx)(u,{trainNum:e.trainNum,trainName:e.trainName})]})}}},function(e){e.O(0,[429,774,888,179],(function(){return t=290,e(e.s=t);var t}));var t=e.O();_N_E=t}]);